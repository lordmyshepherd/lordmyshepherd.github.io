---
title: "자료구조(3) : <Array>"
date: "2020-01-13T22:43:32.169Z"
template: "post"
draft: false
slug: "/posts/자료구조(3)"
category: ""
tags:
description: "#배열이란?, #배열 인덱스를 이용한 데이터 저장/접근법, #배열 탐색, #정적 배열, #동적 배열, #파이썬 리스트(동적 배열)의 비밀, #동적 배열 추가 연산 시간 복잡도, #분할 상환 분석 개념, #분할 상환 분석 적용, #동적 배열 삽입 연산, #동적 배열 삭제 연산, #동적 배열 크기 줄이기, #배열과 동적 배열 정리/비교, #정적 배열에 삽입과 삭제를 못하는 이유"
socialImage: "/media/42-line-bible.jpg"
---
*The Lord is my shepherd, I lack nothing. PSLAM 23:1*

### 목표
**자료구조 이해하기**

+ 배열이란?
+ 배열 인덱스를 이용한 데이터 저장/접근법
+ 배열 탐색
+ 정적 배열
+ 동적 배열
+ 파이썬 리스트(동적 배열)의 비밀
+ 동적 배열 추가 연산 시간 복잡도
+ 분할 상환 분석 개념
+ 분할 상환 분석 적용
+ 동적 배열 삽입 연산
+ 동적 배열 삭제 연산
+ 동적 배열 크기 줄이기
+ 배열과 동적 배열 정리/비교
+ 정적 배열에 삽입과 삭제를 못하는 이유

### 배열이란?
(파이썬 리스트와 비슷) 파이썬은 c언어를 기반으로 만들어졌고, 파이썬의 list는 c의 배열을 이용해서 만들었습니다.
1. **C의 Array와 Python의 list의 핵심적인 차이**  
   list에서는 append method를 쓰면 계속해서 요소를 추가할 수 있다. 반면에 C배열은 크기를 정해놓고 시작한다. 그리고 배열의 각 요소를 다른 값으로 수정할 수는 있지만 지우거나 삭제할 수는 없다. 파이썬 list에서는 다양한 타입의 값들을 담을 수 있는데, c array에서는 같은 타입의 데이터만 담을 수 있다.

   실제로 파이썬 list와 c array가 값을 어떻게 저장하는지 알아야된다.  
   c에서는 정수 하나가 4byte이므로 정수 4개를 담기 위해서 총 연속적인 16칸을 정의한다.
   ![Nulla faucibus vestibulum eros in tempus. Vestibulum tempor imperdiet velit nec dapibus](/media/data/배열.png)

   다음과 같이 파이썬 list를 만들었다고 가정해보자. c배열의 경우 메모리에 연속적으로 2,3,5,7이 저장된다. list는 조금 다른게 2,3,5,7이 연속적인 공간에 있을 수도 있고 아닐 수도 있다. 
   
   그럼 list안에는 뭐가 저장되는 걸까?   
   바로 2,3,5,7이 저장된 곳을 가리키고 있다.
   ![Nulla faucibus vestibulum eros in tempus. Vestibulum tempor imperdiet velit nec dapibus](/media/data/배열1.png)
   이렇게하면 뭐가 가능해지냐면, ***값 자체를 저장하는 것이 아니라서 자료의 크기가 아무리 커도 여기서는 가리키는 역할만 하기 때문에 크고 다양한 타입의 자료를 저장할 수 있는 것이다.***

### **배열에 데이터를 저장하고 가지고 오는 법**  
파이썬에서는 배열을 안쓰기 때문에 c 배열로 설명해보도록 하자(문법은 대충 보자)
```python
int numArray[4];
```
c에서 위와 같이 배열을 선언하면 정수 4개를 담기 위해서 총 16byte의 공간이 필요하다.  그럼 컴퓨터는 현재 메모리에서 사용하고 있지 않고 연속적인 16칸을 찾는다. 예를들어 주소 1000부터 1015까지..
![Nulla faucibus vestibulum eros in tempus. Vestibulum tempor imperdiet velit nec dapibus](/media/data/2.배열.png)
   + 값을 저장하고 싶으면 어떻게 해야될까?  
   --> index로 하면 된다.
   ![Nulla faucibus vestibulum eros in tempus. Vestibulum tempor imperdiet velit nec dapibus](/media/data/2.배열2.png)
   + 저장된 데이터를 받아오는 건 어떻게 할 수 있을까?   
   --> index를 사용하면 된다.  
   그렇다면 받아올때는 내부적으로 어떻게 동작하고 있을까?
   ```python
   numArray : 이 배열이 시작되는 주소를 가르키고있다.
   # 정수 5를 찾기위해 어떻게 해야될까?
   # 배열이 연속적으로 저장되 있다는 사실을 잊지 말자!
   인덱스 2주소 : 1000 + 4x2 = 1008 
   ```
   ![Nulla faucibus vestibulum eros in tempus. Vestibulum tempor imperdiet velit nec dapibus](/media/data/2.배열3.png)
   시작하는 주소만 알면 어떤 index 던지 찾아 받아올 수 있다.
   ![Nulla faucibus vestibulum eros in tempus. Vestibulum tempor imperdiet velit nec dapibus](/media/data/2.배열4.png)

   + 정리  
   배열에 어떤 index 값을 받아오고 싶다면 그 값의 주소를 알아야한다. 그 주소는 간단한 계산으로 구할 수 있다. 그 주소를 알면 O(1)으로 접근이 가능하다. 굉장히 효율적이다. 앞에서 값을 저장하는 방법도 똑같다. 특정 index에 값을 저장하기 위해서는 그 index의 주소를 알아야하는데 주소를 찾아서 그 주소에 O(1)으로 접근하고 값을 저장하면 된다.  
   주소만 알고 있으면 한번에 접근할 수 있는 RAM의 특성을 똑똑하게 이용하는 자료구조이다.
   ![Nulla faucibus vestibulum eros in tempus. Vestibulum tempor imperdiet velit nec dapibus](/media/data/2.배열5.png)

### 배열 탐색
탐색은 접근이랑 약간 다르다. 탐색은 특정 조건을 만족하는 값을 찾는 것이다. 특정 조건에 맞는 값을 찾기 위해서는 하나 하나 다 봐야한다.
예를 들어서 배열 안에 7이 있는 것을 찾기 위해서는 0번 index에서 7이 있는지 확인하고 1번으로가서 확인하고 ... 7을 찾을때까지 봐야한다. 이와 같이 데이터를 순서대로 찾는 방법을 ***선형 탐색***이라고 한다 배열 탐색의 효율성을 시간 복잡도로 나타낸다면 배열에 저장한 데이터가 n개일때 탐색 n에 비례한다고 볼 수 있다.

정리  
   + 배열 접근 연산 : O(1)
   + 배열 탐색 연산 : O(n)

### 정적 배열
처음 정의할때 크기를 정해놓고 정해진 크기 이상 값을 추가할 수 없다. (요소 수 제한)
"C 배열"을 말한다. 일반적으로 말하는 array가 정적 배열이다.  
![Nulla faucibus vestibulum eros in tempus. Vestibulum tempor imperdiet velit nec dapibus](/media/data/3.배열.png)

정적 배열에 대해 알아보자.  

이미 만들어진 배열이 가득차게되면 더이상 추가 할 수 없다. 유일한 해결방법은 정수값 6개를 담을 수 있는 새로운 배열을 만드는 것이다. 실제 과정을 보면..
![Nulla faucibus vestibulum eros in tempus. Vestibulum tempor imperdiet velit nec dapibus](/media/data/3.배열1.png)  
[1단계] 정수 6개를 담을 수 있는 배열 확보  
[2단계] 2,3,5,7,11을 복사하고 마지막에 13을 저장한다.
![Nulla faucibus vestibulum eros in tempus. Vestibulum tempor imperdiet velit nec dapibus](/media/data/3.배열2.png)

비효율적이고 불편해보인다. 왜 바로 옆에 저장하면 안되는 것일까? 
일단 배열을 정의하면 메모리에서 사용할 수 있는 공간을 찾아야한다. 저장하려고하는 데이터 타입과 갯수에 따라서 얼만큼의 공간이 필요한지 정해진다. 이 메모리 공간은 연속적인 공간이여야 한다.

다음과 같이 배열 바로 옆에 13을 추가하고 싶은데, 그 공간이 사용해도 되는 공간인지 알 수 없다. 비어있는지 아닌지 알 수 없으니까 그냥 사용하는 것이 위험하다. 이런 위험성을 미리 방지하기 위해서 이 저장공간 내에서만 데이터를 수정하도록 한다.
![Nulla faucibus vestibulum eros in tempus. Vestibulum tempor imperdiet velit nec dapibus](/media/data/3.배열3.png)

그렇다면 처음부터 여유롭게 사용하겠다고 배열을 크게 정의하면 어떨까? 
낭비되는 공간이 많아진다.
예를들어 5개의 정수를 저장하는데 크기 50,000인 배열을 정의하면, 49,995 개의 정수를 저장할 수 있는 공간이 낭비되는 것이다.
![Nulla faucibus vestibulum eros in tempus. Vestibulum tempor imperdiet velit nec dapibus](/media/data/3.배열4.png)

### 동적 배열
상황에 맞게 배열의 크기가 바뀌기 때문에 꽉차도 계속해서 값을 추가할 수 있다.
사실상 동적 배열은 정적 배열을 이용해서 만들었다.
![Nulla faucibus vestibulum eros in tempus. Vestibulum tempor imperdiet velit nec dapibus](/media/data/4.배열.png)
2배로 늘린 공간을 확보하고 요소를 복사한다.
![Nulla faucibus vestibulum eros in tempus. Vestibulum tempor imperdiet velit nec dapibus](/media/data/4.배열1.png)
다시 2배로 늘린 공간을 확보하고 요소를 복사한다.
![Nulla faucibus vestibulum eros in tempus. Vestibulum tempor imperdiet velit nec dapibus](/media/data/4.배열2.png)

정리하면..
+ 정적 배열로 만들어진 자료 구조
+ 정적 배열의 크기를 상황에 맞게 조젏한다.

**파이썬 리스트(동적 배열)의 비밀**
사실 우리는 이미 동적 배열을 사용하고 있다. 파이썬 리스트가 바로 동적 배열이다. C 배열을 이용해서 동적 배열을 구현한 것이다.

이렇게 5개의 정수 값이 들어간 파이썬 리스트를 만들었다. 파이썬 리스트는 동적 배열이기 때문에, 내부적으로는 C 배열이 만들어진 것이다..
```python
int_list = [2, 3, 5, 7, 11]
```
여기에 새로운 값을 추가할 수도 있다.
```python
int_list.append(13)
```
우리 입장에서는 내부적으로 얼마나 큰 배열이 있는지 몰라도, 값을 마음대로 추가할 수 있다. 동적 배열이기 때문에 상황에 맞게 배열 크기가 조절되고 있는 것이다.

그런데, 우리는 list를 사용할 때 현재 내부적으로 사용되고 있는 배열의 크기를 모른다. 아무리 저장한 데이터가 6개여도 내부적으로는 8개짜리 배열일 수도 있고, 12개짜리 배열일 수도 있고, 15개 짜리 배열일 수도 있다. 알 수가 없다.

그럼 만얀에 리스트의 길이를 출력하면 뭐가 나올까?
```python
print(len(int_list))
#결과
6
```
6이라고 나오는데, 실제 사용하고 있는 메모리 공간이 더 많을지라도, 파이썬은 개수를 셀 때 값을 저장해 놓은 공간에 대해서만 알려준다. 그래서 우리는 나머지 공간에 대해서 전혀 신경을 안써도 된다. 오히려 채워지지 않은 공간을 접근하려고하면 오류가 난다.

우리가 값을 저장해 놓은 공간에만 접근할 수 있도록 파이썬이 미리 처리를 해 놓은 것이다.
파이썬뿐만 아니라, 동적 배열을 자료형으로 제공하는 대부분의 언어들은 이렇게 실제 사용하는 배열의 크기와 상관없이 저장해 놓은 공간만 사용할 수 있게 처리를 해준다.

앞으로 이 여유 공간은 항상 빈칸으로 표시하고, 이 공간은 항상 개발자들이 접근할 수 없다고 가정할 것이다.