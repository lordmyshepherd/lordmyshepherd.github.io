{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/decorator/","result":{"data":{"markdownRemark":{"id":"8ce9c4a8-db7b-5233-940b-569bb1e99393","html":"<p><em>The Lord is my shepherd, I lack nothing. PSLAM 23:1</em></p>\n<h3 id=\"nested-function중첩함수\"><a href=\"#nested-function%EC%A4%91%EC%B2%A9%ED%95%A8%EC%88%98\" aria-label=\"nested function중첩함수 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nested Function(중첩함수)</h3>\n<ul>\n<li>함수도 함수 안에서 중첩되어 선언될 수 있다.</li>\n<li>중첩함수 혹은 내부함수는 상위 부모 함수 안에서만 호출할 수 있다. 즉 부모 함수를 벗어나서 실행될 수 없다.</li>\n<li>\n<p>아래 코드를 보면 child 함수는 parent 함수 밖에서 호출될 수 없다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">parent_function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">child_function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"this is a child function\"</span><span class=\"token punctuation\">)</span>\n\n    child_function<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nparent_function<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> <span class=\"token string\">\"this is a child function\"</span></code></pre></div>\n</li>\n</ul>\n<h3 id=\"nested-function을-왜-사용할까\"><a href=\"#nested-function%EC%9D%84-%EC%99%9C-%EC%82%AC%EC%9A%A9%ED%95%A0%EA%B9%8C\" aria-label=\"nested function을 왜 사용할까 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nested Function을 왜 사용할까?</h3>\n<ol>\n<li>가독성<br>\n함수를 사용하는 이유중 하나는 반복되는 코드블럭을 함수로 정의해서 효과적으로 코드를 관리하고 가독성을 높이기 위함입니다.<br>\n중첩함수를 사용하는 이유도 동일합니다. 함수 안의 코드 중 반복되는 코드가 있다면 중첩함수로 선언하면 부모함수의 코드를 효과적으로 관리하고 가독성을 높일 수 있습니다. </li>\n<li>\n<p>Closure (중요)</p>\n<ul>\n<li>중첩 함수가 부모 함수의 변수나 정보를 중첩 함수 내에서 사용한다.</li>\n<li>부모 함수는 리턴값으로 중첩 함수를 리턴한다.</li>\n<li>부모 함수에서 리턴 했으므로 부모 함수의 변수는 직접적인 접근이 불가능 하지만 부모 함수가 리턴한 중첩 함수를 통해서 사용될 수 있다.</li>\n</ul>\n</li>\n<li>\n<p>그렇다면 closure는 언제 사용하는 것일까?<br>\n주로 factory 패턴을 구현할때 사용된다. 주로 함수나 오브젝트를 생성해내는데 사용된다.<br>\nFactory에서 뭔가를 생성해 내기 위해서는 설정값이 필요할 것 입니다.<br>\n그 설정값을 노출하지 않아서 수정이 불가능하게 하면서 해당 설정값을 기반으로한 연산을 할 수 있는 함수를 만들때 closure를 사용할 수 있다.<br>\n<br>공장처럼 원하는 설정값을 적용해서 무엇가를 만들어내는 예제를 살펴보자.</p>\n<ul>\n<li>\n<p>만일 어떤 <strong><em>주어진 수</em></strong>의 제곱을 구하는 함수는 다음과 같을 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">calculate_power</span><span class=\"token punctuation\">(</span>number<span class=\"token punctuation\">,</span> power<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> number <span class=\"token operator\">**</span> power\n\ncalculate_power<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> <span class=\"token number\">128</span></code></pre></div>\n</li>\n<li>\n<p><strong><em>주어진 수</em></strong>의 제곱을 구하는 것이 아니라 특정 숫자의 제곱을 구하는 함수를 구현하면 다음과 같을 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">calculate_power_of_two</span><span class=\"token punctuation\">(</span>power<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">2</span> <span class=\"token operator\">**</span> power\n\ncalculate_power_of_two<span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> <span class=\"token number\">128</span>\ncalculate_power_of_two<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> <span class=\"token number\">1024</span></code></pre></div>\n<p>하지만 위 함수는 2의 제곱 밖에 구할 수 없는 함수가 되버린다.\n이때 closure를 사용하면 된다!!!</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">generate_power</span><span class=\"token punctuation\">(</span>base_number<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">nth_power</span><span class=\"token punctuation\">(</span>power<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> base_number <span class=\"token operator\">**</span> power\n\n    <span class=\"token keyword\">return</span> nth_power\n\ncalculate_power_of_two <span class=\"token operator\">=</span> generate_power<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\ncalculate_power_of_two<span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> <span class=\"token number\">128</span>\ncalculate_power_of_two<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> <span class=\"token number\">1024</span>\n\ncalculate_power_of_seven <span class=\"token operator\">=</span> generate_power<span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">)</span>\ncalculate_power_of_seven<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> <span class=\"token number\">343</span>\ncalculate_power_of_seven<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> <span class=\"token number\">16907</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/43501727e3aef6e2103f32c3803b1515/cc079/closure.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.50293772032902%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAACo0lEQVQ4y42TbUhTYRTHn7t755ZvmzNb62ppb0znUMwUv5RFidmnvgwmJpWDQqHrt0hRKOqLQlSQm96l9DEjBrVpkUrgBMN82UrpDfoSNhJTUyK17uncN425sgM/zrnPc+//nPM85xJCSCKSopCAJBHixBiSWXbFxLIzmVlZD5Pr6oCy25cZspldbWzceabSafdcu26913Ilu+Xy2f3OyiaryzW6N9b7Op1gJESwYMI09Cx6M4JrsB3Rk8+RiG9qagrehia+vw9/WHk9+m65f+DF6uDg2NLkZLghGOyrHR8fLVQFaVrYjR+WISUIrsMBpAixIQyJRCKHJkLhGp+vu7o38KrqSeBj9cCz6ere3pmqUCh02u8PnB8aCuaJYgCtRK8XDBilY3WZiE5OA1R0J3oRaC7WQVO5MVarDkeEtlqB3rgjKB4UpMxyMNzdF6e+VjMCVM/jN0xn13Omo2NSQ9NASkuXiVYrCgiUXBX8IaQIz/Me02x7m2m2w5MG3luGRd6dOs+3pyzedSfIyTbWVFAAf7/lBa9nxxzfblni3Rlh/j77hffu+ub1WERRcX+6rZN46oYlEZVNRVUrcf8oIjdArz4fybGRrQYtuX3hsHw0gXryy8+h56RY9pyyx20UrOj6edT1FBJjJYOeekUE8YtwRBDF/Yqgf11cbC2N0tBGOi5+G8YmBAeWmMU9LaOxnCuz6f/VmSqqGg4qyUbSmbgtOTTNZIi/Y+E+sznY6igeuek8uPCgthgry8GKcoUAZ8dK8tDnolA+khRdIbXn5CVpvo63zRWe8kH8WmYY0wB80sDLZgbbZFB0DRTENU6LUNGCa1bmXSk/duerPNgnusn/WnTLeGZUqtgym19hUBddDTxZfXRRugTp8CW/frMSMS7lN8UIQ8LeFvGnAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/43501727e3aef6e2103f32c3803b1515/01472/closure.webp 240w,\n/static/43501727e3aef6e2103f32c3803b1515/222bd/closure.webp 480w,\n/static/43501727e3aef6e2103f32c3803b1515/620b9/closure.webp 960w,\n/static/43501727e3aef6e2103f32c3803b1515/28063/closure.webp 1440w,\n/static/43501727e3aef6e2103f32c3803b1515/34ef4/closure.webp 1920w,\n/static/43501727e3aef6e2103f32c3803b1515/05ce0/closure.webp 2553w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/43501727e3aef6e2103f32c3803b1515/0783d/closure.png 240w,\n/static/43501727e3aef6e2103f32c3803b1515/782f4/closure.png 480w,\n/static/43501727e3aef6e2103f32c3803b1515/f570d/closure.png 960w,\n/static/43501727e3aef6e2103f32c3803b1515/8d0ff/closure.png 1440w,\n/static/43501727e3aef6e2103f32c3803b1515/a987b/closure.png 1920w,\n/static/43501727e3aef6e2103f32c3803b1515/cc079/closure.png 2553w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/43501727e3aef6e2103f32c3803b1515/f570d/closure.png\"\n          alt=\"Nulla faucibus vestibulum eros in tempus. Vestibulum tempor imperdiet velit nec dapibus\"\n          title=\"Nulla faucibus vestibulum eros in tempus. Vestibulum tempor imperdiet velit nec dapibus\"\n          loading=\"lazy\"\n        />\n      </picture>\n  </a>\n    </span>          </p>\n</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"args-kwargs\"><a href=\"#args-kwargs\" aria-label=\"args kwargs permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>*args, *kwargs</h3>\n<p>자동차를 구입할때 기본 사양의 자동차를 살 수 도 있고, 원하면 여러 옵션을 추가 해서 구입할 수 있습니다. 예를 들어, 가죽 의자 옵션을 추가 한다던가 해서 자동차를 구입할 수 있습니다.  </p>\n<p>예를 들어, A라는 자동차는 옵션 사항이 40개 정도 된다고 가정해 보겠습니다.<br>\nA라는 자동차를 구입하는 함수를 구현한다고 했을때, 모든 옵션 사항을 parameter로 받을려면 parameter수가 40개나 되어야 하므로 함수의 정의 부분이 너무 길어질것입니다.<br>\n게다가 대부분의 옵션 사항은 설정이 안될 확률이 높습니다. 그렇다면 40개의 parameter가 사용되지 않는데도 불구하고 정의되어야 하는 상황이 됩니다.<br>\n또한, A라는 자동차는 계속해서 업그레이드 되므로 전에는 없던 옵션이 생길 수 있습니다. 혹은 있던 옵션이 사라질 수 도 있습니다. 하지만 이미 정의된 함수를 바꾸려면 코드를 수정하고 다시 재배포 해야 하기 때문에 옵션 사항들을 그때 그때 바꿀수 있는 유동성(flexibility)가 떨어집니다.  </p>\n<p>그렇다면 이렇게 사전에 정확히 필요한 parameter 수와 구조를 알수 없는 경우는 어떻게 해야할까요?</p>\n<ul>\n<li>\n<p>Dictionary를 paramter로 받아서 사용하는 방법</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">buy_A_car</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"다음 사양의 자동차를 구입하십니다:\"</span></span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">for</span> option <span class=\"token keyword\">in</span> options<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>option<span class=\"token punctuation\">}</span></span><span class=\"token string\"> : </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>options<span class=\"token punctuation\">[</span>option<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n</ul>\n<p>options = {“seat” : “가죽”, “blackbox” : “최신”}\nbuy<em>A</em>car(options)</p>\n<blockquote>\n<p>다음 사양의 자동차를 구입하십니다:\nseat : 가죽\nblackbox : 최신</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">이렇게 하면 원하는 옵션만 간단하게 설정 할 수 있다는 장점은 있지만 옵션을 dictionary로 받아야만 한다는 제약사항이 있습니다. 만일 옵션을 하나도 추가 안하고 기본사양으로 사는 경우에도 비어있는 dictionary를 넘겨줘야 하는것이죠. 게다가 dictionary가 아닌 다른 타입의 값 (예를 들어 string)을 넘겨주는 오류가 생길 확률도 있습니다.\n\n1. Keyworded variable length of arguments\nKeyworded variable length of arguments는 이름 그대로 keyword arguments 인데 그 수가 정해지지 않고 유동적으로 변할 수 있는 keyword arguments 이다.</code></pre></div>","fields":{"slug":"/posts/decorator/","tagSlugs":null},"frontmatter":{"date":"2019-11-14T22:40:32.169Z","description":"#DoesNotExist vs ObjectsDoesNotExist","tags":null,"title":"Decorator","socialImage":""}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/decorator/"}}}